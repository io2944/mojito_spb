<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
	<head>
	    <meta charset="UTF-8">
	    <title>D√©tail de la commande | Mojito</title>
	    <link type="text/css" rel="stylesheet" th:href="@{/styleDocuments.css}" />
	</head>
	<body>
		<!-- Inclusion du header en fragment --> 
		<div th:replace="~{inc/header :: header}"></div>
		<section class="carte-actions">
			<a class="retour" th:href="@{/viewCommande/{id}(id=${commande.id})}">Imprimer</a> 
			<a class="retour" th:href="@{/modifierCommande/{id}(id=${commande.id})}">Modifier</a>
			<a class="retour" th:href="@{/deleteCommande(id=${commande.id})}"
				   onclick="return confirm('Confirmer la suppression du devis ?');">Supprimer</a>
		</section>	
		<!-- Affichage du message -->
		<p class="info" th:text="${message}"></p>

		<div class="page-document">

			<div class="en-tete-document">
				<div class="entreprise">
					<h1>Cryorbiter</h1>
					<p>1, rue de la Lune</p>
					<p>99999 Moon City</p>
					<p>T√©l : 02 02 02 02 02</p>
					<p>Email : contact@cryorbiter.com</p>
				</div>

				<div class="bloc-client">
					<h2>Client</h2>
					<p th:text="${commande.client.prenom} + ' ' + ${commande.client.nom}"></p>
					<p th:text="${commande.client.email}"></p>
					<p th:text="${commande.client.telephoneFixe}"></p>
				</div>
			</div>

			<div class="infos-document">
				<h2>Commande n¬∞ <span th:text="${commande.nomDocument}"></span></h2>
				<p>Date : <span th:text="${#dates.format(commande.date, 'dd/MM/yyyy')}"></span></p>
				<p th:text="'Objet : ' + ${commande.libelle}"></p>
			</div>

			<div class="additionnelle">
	        	<p>Informations additionnelles : Service anti-trash - Garantie: 2 ans.</p>
			</div>
	    	<hr>

	    	<table class="document">
	    		<thead>
	    			<tr>
		                <th scope="col">Libelle</th>
		                <th scope="col">Date</th>
		                <th scope="col">Poids (en kilos)</th>
						<th scope="col">Prix unitaire HT</th>
		                <th scope="col">%TVA</th>
		                <th scope="col">Total HT</th>
	            	</tr>
	    		</thead>
	    		<tbody>
		            <tr>
		                <th scope="row" th:text="${commande.libelle}"></th>
		                <td th:text="${#dates.format(commande.date, 'yyyy-MM-dd')}"></td>

						<td th:text="${#numbers.formatDecimal(commande.poids, 1, 'POINT', 2, 'COMMA') + ' kg'}"></td>
						<td th:text="${#numbers.formatDecimal(commande.prixKilo, 1, 'POINT', 2, 'COMMA') + ' ‚Ç¨/kg'}"></td>
						<td th:text="${#numbers.formatDecimal(commande.tva, 1, 'POINT', 2, 'COMMA') + ' ‚Ç¨'}"></td>
						<td th:text="${#numbers.formatDecimal(commande.devis.montantHT, 1, 'POINT', 2, 'COMMA') + ' ‚Ç¨'}"></td>
		            </tr>
	            </tbody>
	            <tfoot>
				<tr class="total-ligne">
					<th colspan="5" style="text-align:right;">Total HT</th>
					<td th:text="${#numbers.formatDecimal(commande.devis.montantHT, 1, 'POINT', 2, 'COMMA') + ' ‚Ç¨'}"></td>
				</tr>
				<tr class="total-ligne">
					<th colspan="5" style="text-align:right;">TVA</th>
					<td th:text="${#numbers.formatDecimal(commande.devis.montantTVA, 1, 'POINT', 2, 'COMMA') + ' ‚Ç¨'}"></td>

				</tr>
				<tr class="total-ligne">
					<th colspan="5" style="text-align:right;">Total TTC</th>
					<td th:text="${#numbers.formatDecimal(commande.devis.montantTTC, 1, 'POINT', 2, 'COMMA') + ' ‚Ç¨'}"></td>

				</tr>
				</tfoot>
	    	</table>

			<div class="pied-page">
				<p>Merci de votre confiance.</p>
				<p>Cryorbiter - 1 rue de la Lune, 99999 Moon City</p>
			</div>
		</div>

		<button class="bouton-imprimer" onclick="window.print()">üñ®Ô∏è Imprimer le devis</button>

		<section class="retour associe">
	    	<a th:href="@{/listeCommande}" >Voir la liste des commandes</a>
	    </section>
		<!-- Footer inclus -->
		<div th:replace="~{inc/footer :: footer}"></div>
		<script th:src="@{/js/menu.js}" defer></script>
	</body>
</html>
